<%= form_with model: detal, local: true, data: { } do |f| %>
  <%= render "shared/errors", object: detal if detal.errors.any? %>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- Большая часть - основная информация -->
    <div class="lg:col-span-2 space-y-6">
      <div class="bg-white rounded-lg shadow p-6">
        <div class="mb-4 flex items-center gap-4">
          <div class="flex items-center gap-2">
            <%= f.check_box :status, class: "w-5 h-5 text-violet-600 border-gray-300 rounded focus:ring-violet-500" %>
            <%= f.label :status, class: "text-sm font-medium text-gray-700" %>
          </div>
        </div>
        <div class="mb-4">
          <%= f.label :title, class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :title, class: "w-full px-3 py-2 border border-gray-300 rounded-md" %>
        </div>

        <div class="mb-4">
          <%= f.label :sku, class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_field :sku, class: "w-full px-3 py-2 border border-gray-300 rounded-md" %>
        </div>

        <div class="mb-4">
          <%= f.label :desc, class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.text_area :desc, rows: 4, class: "w-full px-3 py-2 border border-gray-300 rounded-md" %>
        </div>
      </div>

      <!-- Features -->
      <div class="bg-white rounded-lg shadow p-6">
        <div class="mb-2 flex items-center justify-between">
          <legend class="text-sm font-medium text-gray-700"><%= t("features.title") %></legend>
          <% path = detal.new_record? ? new_feature_path(detal_id: nil) : new_detal_feature_path(detal) %>
          <%= link_to t("features.add_feature"), path, data: { turbo_stream: "true" },
            class: "px-3 py-1 rounded-md bg-blue-300 hover:bg-blue-400" %>
        </div>      
        <%= turbo_frame_tag dom_id(detal, 'features') do %>
          <div class="grid grid-cols-[1fr_1fr_50px] gap-4 p-2 border-t hover:bg-gray-50">
            <div><%= Property.model_name.human %></div>
            <div><%= Characteristic.model_name.human %></div>
            <div></div>
          </div>

          <% detal.features.each do |feature| %>  
            <%= render "features/feature", feature: feature, detal: detal %>
          <% end %>
        <% end %>
      </div>
    </div>

    <!-- Малая часть - oszz_price -->
    <div class="lg:col-span-1 space-y-6">
      <div class="bg-white rounded-lg shadow p-6">
        <div class="mb-4">
          <%= f.label :oszz_price, Detal.human_attribute_name(:oszz_price), class: "block text-sm font-medium text-gray-700 mb-1" %>
          <%= f.number_field :oszz_price, step: 0.01, min: 0, class: "w-full px-3 py-2 border border-gray-300 rounded-md" %>
        </div>
      </div>
    </div>

  </div>

  <!-- Кнопки действий -->
  <div class="mt-6 flex justify-start space-x-3">
    <%= f.submit class: "px-4 py-2 bg-violet-600 text-white rounded-md hover:bg-violet-700" %>
    <%= link_to t("detals.form.cancel"), detals_path, class: "px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300" %>
  </div>
<% end %>
