<%= turbo_frame_tag dom_id(product), class: "grid grid-cols-[20px_50px_80px_80px_1fr_120px_120px] gap-2 px-3 py-2 border-b hover:bg-gray-50 items-center" do %>
  <div>
    <%= check_box_tag "product_ids[]", product.id, false, {
      class: 'checkboxes w-4 h-4 text-violet-600 border-gray-300 rounded focus:ring-violet-500', 
      data: { 'selectall_target': 'checkbox', action: "change->selectall#toggleParent"}, 
      form: :bulk_action_form 
    } %>
  </div>
  <div><%= product.id %></div>
  <div>
    <% first_image = product.images.first %>
    <% if first_image&.file&.attached? %>
      <%= image_tag first_image.s3_url, alt: product.title, class: "w-16 h-16 object-cover rounded" %>
    <% else %>
      <div class="w-16 h-16 bg-gray-200 rounded flex items-center justify-center text-gray-400 text-xs">No image</div>
    <% end %>
  </div>
  <div><%= product.status %></div>
  <div class="flex flex-col">
    <div>
      <%= link_to product.title, edit_product_path(product), class: "text-blue-600 hover:text-blue-800", data: {turbo: false } %>
    </div>
    <div class="text-xs text-gray-500"><%= product.variants&.first&.sku %></div>
    <div class="text-xs text-gray-500"><%= product.variants&.first&.barcode %></div>
  </div>
  <% variant = product.variants&.first %>
  <%= render 'products/inline/price', product: product, variant: variant %>
  <div class="flex justify-end space-x-2">
    <%= link_to sync_with_moysklad_product_path(product), 
        method: :post,
        class: "p-2 rounded-md bg-green-100 hover:bg-green-200 flex items-center justify-center",
        title: t("products.sync_with_moysklad"),
        data: { turbo_method: :post } do %>
      <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 text-green-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
      </svg>
    <% end %>
    <%= link_to_delete product_path(product), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
  </div>
<% end %>