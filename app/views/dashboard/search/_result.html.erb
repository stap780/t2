<div class="py-0" id="fullsearch_result" aria-labelledby="fullsearch_result_form">
  <% if @search_results.values.flatten.empty? %>
    <div class="px-4 py-2 text-sm text-gray-500">
      <%= t('dashboard.search.no_results') %>
    </div>
  <% else %>
    <div class="divide-y divide-gray-200">
      <% Dashboard::SEARCHABLE_MODEL_ATTRIBUTES.each do |model_name, _| %>
        <% model_results = @search_results[model_name] %>
        <% if model_results.present? %>
          <div class="px-4 py-2">
            <div class="text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1">
              <%= t("helpers.label.dashboard.#{model_name.downcase}", default: model_name) %>
            </div>
            <div class="space-y-1">
              <% model_results.each do |result| %>
                <% 
                  if model_name == 'Variant'
                    record_id = result[0]  # product_id
                    display_text = [result[1], result[2], result[3]].compact.join(' - ')  # sku, barcode, product.title
                    link_path = edit_product_path(record_id)
                  else
                    record_id = result[0]  # id
                    display_text = result[1..-1].join(' ')  # остальные поля
                    link_path = case model_name
                                when 'Incase'
                                  edit_incase_path(record_id)
                                when 'User'
                                  edit_user_path(record_id)
                                when 'Company'
                                  edit_company_path(record_id)
                                when 'Product'
                                  edit_product_path(record_id)
                                else
                                  '#'
                                end
                  end
                %>
                <a href="<%= link_path %>" 
                   class="block text-sm text-gray-700 hover:bg-gray-50 hover:text-violet-600 px-2 py-1 rounded"
                   data-turbo-frame="_top">
                  <%= highlight(display_text, params[:query]) %>
                </a>
              <% end %>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>

