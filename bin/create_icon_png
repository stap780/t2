#!/usr/bin/env ruby
# Script to create icon.png from icon.svg
# Requires: brew install librsvg (or ImageMagick)

require 'open3'

svg_path = File.join(__dir__, '..', 'public', 'icon.svg')
png_path = File.join(__dir__, '..', 'public', 'icon.png')

# Try rsvg-convert first
if system('which rsvg-convert > /dev/null 2>&1')
  system("rsvg-convert -w 512 -h 512 #{svg_path} > #{png_path}")
  puts "Icon PNG created using rsvg-convert!"
  exit 0
end

# Try ImageMagick
if system('which convert > /dev/null 2>&1')
  system("convert -background none -resize 512x512 #{svg_path} #{png_path}")
  puts "Icon PNG created using ImageMagick!"
  exit 0
end

# Try Inkscape
if system('which inkscape > /dev/null 2>&1')
  system("inkscape --export-filename=#{png_path} --export-width=512 --export-height=512 #{svg_path}")
  puts "Icon PNG created using Inkscape!"
  exit 0
end

puts "No SVG to PNG converter found."
puts "Install one of:"
puts "  brew install librsvg  # for rsvg-convert"
puts "  brew install imagemagick  # for convert"
puts "  brew install inkscape  # for inkscape"
puts ""
puts "Or use an online converter: https://convertio.co/svg-png/"
exit 1

