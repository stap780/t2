// @codemirror/legacy-modes/mode/xml@6.5.2 downloaded from https://ga.jspm.io/npm:@codemirror/legacy-modes@6.5.2/mode/xml.js

var t={autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true,menuitem:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true};var e={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,allowMissingTagName:false,caseFold:false};function r(r){var n={};var u=r.htmlMode?t:e;for(var a in u)n[a]=u[a];for(var a in r)n[a]=r[a];var o,i;function l(t,e){function r(r){e.tokenize=r;return r(t,e)}var n=t.next();if(n=="<"){if(t.eat("!")){if(t.eat("["))return t.match("CDATA[")?r(c("atom","]]>")):null;if(t.match("--"))return r(c("comment","--\x3e"));if(t.match("DOCTYPE",true,true)){t.eatWhile(/[\w\._\-]/);return r(d(1))}return null}if(t.eat("?")){t.eatWhile(/[\w\._\-]/);e.tokenize=c("meta","?>");return"meta"}o=t.eat("/")?"closeTag":"openTag";e.tokenize=s;return"angleBracket"}if(n=="&"){var u;u=t.eat("#")?t.eat("x")?t.eatWhile(/[a-fA-F\d]/)&&t.eat(";"):t.eatWhile(/[\d]/)&&t.eat(";"):t.eatWhile(/[\w\.\-:]/)&&t.eat(";");return u?"atom":"error"}t.eatWhile(/[^&<]/);return null}l.isInText=true;function s(t,e){var r=t.next();if(r==">"||r=="/"&&t.eat(">")){e.tokenize=l;o=r==">"?"endTag":"selfcloseTag";return"angleBracket"}if(r=="="){o="equals";return null}if(r=="<"){e.tokenize=l;e.state=x;e.tagName=e.tagStart=null;e.tokenize(t,e);return"invalid"}if(/[\'\"]/.test(r)){e.tokenize=f(r);e.stringStartCol=t.column();return e.tokenize(t,e)}t.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function f(t){var e=function(e,r){while(!e.eol())if(e.next()==t){r.tokenize=s;break}return"string"};e.isInAttribute=true;return e}function c(t,e){return function(r,n){while(!r.eol()){if(r.match(e)){n.tokenize=l;break}r.next()}return t}}function d(t){return function(e,r){var n;while((n=e.next())!=null){if(n=="<"){r.tokenize=d(t+1);return r.tokenize(e,r)}if(n==">"){if(t==1){r.tokenize=l;break}r.tokenize=d(t-1);return r.tokenize(e,r)}}return"meta"}}function g(t){return t&&t.toLowerCase()}function m(t,e,r){this.prev=t.context;this.tagName=e||"";this.indent=t.indented;this.startOfLine=r;(n.doNotIndent.hasOwnProperty(e)||t.context&&t.context.noIndent)&&(this.noIndent=true)}function h(t){t.context&&(t.context=t.context.prev)}function p(t,e){var r;while(true){if(!t.context)return;r=t.context.tagName;if(!n.contextGrabbers.hasOwnProperty(g(r))||!n.contextGrabbers[g(r)].hasOwnProperty(g(e)))return;h(t)}}function x(t,e,r){if(t=="openTag"){r.tagStart=e.column();return k}return t=="closeTag"?w:x}function k(t,e,r){if(t=="word"){r.tagName=e.current();i="tag";return T}if(n.allowMissingTagName&&t=="endTag"){i="angleBracket";return T(t,e,r)}i="error";return k}function w(t,e,r){if(t=="word"){var u=e.current();r.context&&r.context.tagName!=u&&n.implicitlyClosed.hasOwnProperty(g(r.context.tagName))&&h(r);if(r.context&&r.context.tagName==u||n.matchClosing===false){i="tag";return v}i="error";return b}if(n.allowMissingTagName&&t=="endTag"){i="angleBracket";return v(t,e,r)}i="error";return b}function v(t,e,r){if(t!="endTag"){i="error";return v}h(r);return x}function b(t,e,r){i="error";return v(t,e,r)}function T(t,e,r){if(t=="word"){i="attribute";return N}if(t=="endTag"||t=="selfcloseTag"){var u=r.tagName,a=r.tagStart;r.tagName=r.tagStart=null;if(t=="selfcloseTag"||n.autoSelfClosers.hasOwnProperty(g(u)))p(r,u);else{p(r,u);r.context=new m(r,u,a==r.indented)}return x}i="error";return T}function N(t,e,r){if(t=="equals")return z;n.allowMissing||(i="error");return T(t,e,r)}function z(t,e,r){if(t=="string")return y;if(t=="word"&&n.allowUnquoted){i="string";return T}i="error";return T(t,e,r)}function y(t,e,r){return t=="string"?y:T(t,e,r)}return{name:"xml",startState:function(){var t={tokenize:l,state:x,indented:0,tagName:null,tagStart:null,context:null};return t},token:function(t,e){!e.tagName&&t.sol()&&(e.indented=t.indentation());if(t.eatSpace())return null;o=null;var r=e.tokenize(t,e);if((r||o)&&r!="comment"){i=null;e.state=e.state(o||r,t,e);i&&(r=i)}return r},indent:function(t,e,r){var u=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+r.unit;if(u&&u.noIndent)return null;if(t.tokenize!=s&&t.tokenize!=l)return null;if(t.tagName)return n.multilineTagIndentPastTag!==false?t.tagStart+t.tagName.length+2:t.tagStart+r.unit*(n.multilineTagIndentFactor||1);if(n.alignCDATA&&/<!\[CDATA\[/.test(e))return 0;var a=e&&/^<(\/)?([\w_:\.-]*)/.exec(e);if(a&&a[1])while(u){if(u.tagName==a[2]){u=u.prev;break}if(!n.implicitlyClosed.hasOwnProperty(g(u.tagName)))break;u=u.prev}else if(a)while(u){var o=n.contextGrabbers[g(u.tagName)];if(!o||!o.hasOwnProperty(g(a[2])))break;u=u.prev}while(u&&u.prev&&!u.startOfLine)u=u.prev;return u?u.indent+r.unit:t.baseIndent||0},languageData:{indentOnInput:/<\/[\s\w:]+>$/,commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}}},configuration:n.htmlMode?"html":"xml",skipAttribute:function(t){t.state==z&&(t.state=T)},xmlCurrentTag:function(t){return t.tagName?{name:t.tagName,close:t.type=="closeTag"}:null},xmlCurrentContext:function(t){var e=[];for(var r=t.context;r;r=r.prev)e.push(r.tagName);return e.reverse()}}}const n=r({});const u=r({htmlMode:true});export{u as html,r as mkXML,n as xml};

